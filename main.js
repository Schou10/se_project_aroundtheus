!function(){"use strict";class e{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResonse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResonse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResonse)}updatUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,job:e.job})}).then(this._checkResonse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResonse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResonse)}}new e({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}});class t{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._trashButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button-active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._trashButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageElement.setAttribute("src",this._link),this._cardImageElement.setAttribute("alt",this._name),this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class s{constructor(e,t){let{data:s,renderer:n}=e;this._data=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._data.forEach((e=>{this._renderer(e)}))}addItems(e){this._container.prepend(e)}}class n{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}),0)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._jobElement.textContent=e.job}}const i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class o{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"!==e.key&&"Esc"!==e.key||this.close()};setEventListeners(){this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class a extends o{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this.inputList=this._popupForm.querySelectorAll(".modal__input")}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._popupForm.reset()}))}_getInputValues(){const e={};return this.inputList.forEach((t=>{e[t.name]=t.value.trim()})),e}setInputValues(e){console.log(e),this.inputList.forEach((t=>{t.value=e[t.name]}))}}const l=new e({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}});l.getInitialCards().then((e=>{const t=new s({data:e,renderer:e=>{const s=S(e);t.addItems(s)}},".galary__cards");t.renderItems(e),console.log(e)})).catch((e=>{console.error(e)})),l.getUserInfo().then((e=>{new r("#name","#description","#avatar").setUserInfo(e),console.log(e)})).catch((e=>{console.error(`Error fetching user info: ${e}`)}));const c=new a("#profile-edit-modal",(function(e){userInfo.setUserInfo({name:e.name,job:e.description}),c.close()})),d=new a("#add-card-modal",(function(e){const t=S({name:e.title,link:e.url});section.addItems(t),d.close(),b.reset(),f.disableButton()})),h=new class extends o{constructor(e,t){super(e),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__card-title")}open(e){this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupTitle.textContent=e.name,super.open()}}("#image-modal",g),u=document.querySelector("#profile-edit-button"),_=document.querySelector("#profile-add-button"),m=document.querySelector("#name-input"),p=document.querySelector("#description-input"),E=(document.querySelector("#avatar-url-input"),document.forms["profile-edit-form"]),b=document.forms["add-card-form"],v=new n(i,E),f=new n(i,b);function S(e){return new t(e,"#card-template",g).getView()}function g(e){h.open(e)}v.enableValidation(),f.enableValidation(),u.addEventListener("click",(function(){const e=userInfo.getUserInfo();m.value=e.name,p.value=e.job,c.open()})),_.addEventListener("click",(()=>{d.open()})),c.setEventListeners(),d.setEventListeners(),h.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUluQyxFQUFLbUMsRUFBTSxpQkFBa0JqQyxHQUNwQ3FCLFNBQ25CLENBR0EsU0FBU3JCLEVBQWlCbUgsR0FDdEJjLEVBQVczQyxLQUFLNkIsRUFDcEIsQ0FaQXlCLEVBQWtCckUsbUJBQ2xCeUQsRUFBaUJ6RCxtQkF1Q2pCK0QsRUFBa0IxSCxpQkFBaUIsU0FSbkMsV0FDRSxNQUFNaUksRUFBY3BCLFNBQVN6SSxjQUM3QndKLEVBQWM3QixNQUFRa0MsRUFBWXRKLEtBQ2xDa0osRUFBYTlCLE1BQVFrQyxFQUFZckosSUFDakNrSSxFQUFVcEMsTUFDWixJQUtBaUQsRUFBaUIzSCxpQkFBaUIsU0FBUyxLQUN6Q2dILEVBQWF0QyxNQUFNLElBR3JCb0MsRUFBVTlCLG9CQUNWZ0MsRUFBYWhDLG9CQUNicUMsRUFBV3JDLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc29uc2UocmVzKXtcclxuICAgIGlmIChyZXMub2spe1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIG90aGVyIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCB0aGUgQVBJXHJcbiAgZ2V0VXNlckluZm8oKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAse1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0VXNlckluZm8oZGF0YSl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGpvYjogZGF0YS5qb2JcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc29uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc29uc2UpO1xyXG4gIH1cclxuXHJcbiAgfVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYzU2ZTMwZGMtMjg4My00MjcwLWE1OWUtYjJmN2JhZTk2OWM2XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZScpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpXHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2xpbmspO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX25hbWUpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHtkYXRhLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICB9KTtcclxufVxyXG5cclxuICBhZGRJdGVtcyhlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9LCAwKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZve1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKVxyXG4gICAgXHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCwgXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudH07ICAgIFxyXG4gIH1cclxuICBzZXRVc2VySW5mbyhkYXRhKXtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuam9iIDtcclxufVxyXG4gIH1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiIFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIiBcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIiBcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIgXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIgXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIiBcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiB8fCBldmVudC5rZXkgPT09IFwiRXNjXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHt0aGlzLmNsb3NlKCk7fSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0gKVxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKVxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLmlucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0Jyk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vIEhlcmUgeW91IGluc2VydCB0aGUgYHZhbHVlYCBieSB0aGUgYG5hbWVgIG9mIHRoZSBpbnB1dFxyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyAgZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vLyBBUElcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYzU2ZTMwZGMtMjg4My00MjcwLWE1OWUtYjJmN2JhZTk2OWM2XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7XHJcblxyXG4vLyBSZW5kZXIgaW5pdGlhbCBjYXJkc1xyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbihjYXJkcyA9PiB7XHJcbiAgICBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIGRhdGE6IGNhcmRzLFxyXG4gIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICBzZWN0aW9uLmFkZEl0ZW1zKGNhcmRFbGVtZW50KTtcclxuICAgIH1cclxuICB9LCAnLmdhbGFyeV9fY2FyZHMnKTtcclxuICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcclxuICBjb25zb2xlLmxvZyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KVxyXG5cclxuLy9HZXQgVXNlciBpbmZvXHJcbmFwaS5nZXRVc2VySW5mbygpXHJcbi50aGVuKHVzZXJJbmZvID0+IHtcclxuICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiI25hbWVcIiwgXCIjZGVzY3JpcHRpb25cIiwgXCIjYXZhdGFyXCIpO1xyXG4gIHVzZXIuc2V0VXNlckluZm8odXNlckluZm8pO1xyXG4gIGNvbnNvbGUubG9nKHVzZXJJbmZvKTtcclxufSlcclxuLmNhdGNoKGVyciA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgdXNlciBpbmZvOiAke2Vycn1gKTtcclxufSk7XHJcblxyXG5cclxuXHJcbi8qIEVsZW1lbnRzICovIFxyXG5cclxuLy9wb3B1cHNcclxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNwcm9maWxlLWVkaXQtbW9kYWwnLCBoYW5kbGVQcm9maWxlU3VibWl0KTtcclxuY29uc3QgYWRkY2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNhZGQtY2FyZC1tb2RhbCcsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcjaW1hZ2UtbW9kYWwnLCBoYW5kbGVJbWFnZUNsaWNrKTsgXHJcblxyXG4vL2J1dHRvblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWVkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vcHJvZmlsZSBuYW1lICYgZGVzY3JpcHRpb24gLyB1c2VyIGluZm8gLyB1c2UgUHJvZmlsZSBpbWdcclxuY29uc3QgdXNlck5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgdXNlckpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuY29uc3QgdXNlckF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItdXJsLWlucHV0XCIpO1xyXG5cclxuXHJcbi8vZm9ybXNcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LWZvcm1cIl07XHJcbmNvbnN0IHByb2ZpbGVBZGRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcclxuXHJcbi8vdmFsaWRhdG9yc1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtRWxlbWVudCk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIHByb2ZpbGVBZGRGb3JtRWxlbWVudCk7XHJcblxyXG5cclxuLyogRnVuY3Rpb25zKi9cclxuLy9Gb3JtIFZhbGlkYXRvcnNcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vQ3JlYXRlIENhcmRcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCAnI2NhcmQtdGVtcGxhdGUnLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxucmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKVxyXG59XHJcbi8qRXZlbnQgSGFuZGxlcnMqL1xyXG4vL2ltYWdlIGNsaWNrXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICAgIGltYWdlUG9wdXAub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuXHJcbi8vZWRpdCBwcm9maWxlXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtuYW1lOiBkYXRhLm5hbWUsIGpvYjogZGF0YS5kZXNjcmlwdGlvbn0pO1xyXG5lZGl0UG9wdXAuY2xvc2UoKTsgfVxyXG5cclxuLy9hZGQgY2FyZFxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgbmFtZTogZGF0YS50aXRsZSxcclxuICAgIGxpbms6IGRhdGEudXJsXHJcbiAgfTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZCk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtcyhjYXJkRWxlbWVudCk7XHJcbiAgYWRkY2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgcHJvZmlsZUFkZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5FZGl0UHJvZmlsZU1vZGFsKCkge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICB1c2VyTmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXIubmFtZTtcclxuICB1c2VySm9iSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlci5qb2I7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuLy8gRXZlbnQgTGlzdGVuZXJzXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkVkaXRQcm9maWxlTW9kYWwpO1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBhZGRjYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRjYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGRhdGEpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2FyZC10aXRsZScpO1xyXG4gICAgXHJcbiAgICBcclxuXHJcbiAgfVxyXG4gIG9wZW4oZGF0YSl7XHJcbiAgIC8vIHNldCB0aGUgaW1hZ2UncyBzcmMgYW5kIGFsdFxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgLy8gc2V0IHRoZSBjYXB0aW9uJ3MgdGV4dENvbnRlbnRcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkFwaSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwidXBkYXRVc2VySW5mbyIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJqb2IiLCJhZGROZXdDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhdXRob3JpemF0aW9uIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl90cmFzaEJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3Iiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfZGF0YSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJpdGVtIiwiYWRkSXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oaWRlSW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiX3Nob3dJbnB1dEVycm9yIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldFRpbWVvdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiVXNlckluZm8iLCJuYW1lU2VsY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50Iiwic2V0VXNlckluZm8iLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VCdXR0b24iLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJpbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJ0cmltIiwic2V0SW5wdXRWYWx1ZXMiLCJjb25zb2xlIiwibG9nIiwiYXBpIiwiY2FyZHMiLCJzZWN0aW9uIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJjYXRjaCIsImVyciIsImVycm9yIiwidXNlckluZm8iLCJlZGl0UG9wdXAiLCJkZXNjcmlwdGlvbiIsImFkZGNhcmRQb3B1cCIsInRpdGxlIiwidXJsIiwicHJvZmlsZUFkZEZvcm1FbGVtZW50IiwiYWRkRm9ybVZhbGlkYXRvciIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwic3JjIiwiYWx0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwidXNlck5hbWVJbnB1dCIsInVzZXJKb2JJbnB1dCIsInByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQiLCJmb3JtcyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY3VycmVudFVzZXIiXSwic291cmNlUm9vdCI6IiJ9